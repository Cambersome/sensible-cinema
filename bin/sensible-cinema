#!/usr/bin/ruby # so my editor will like the file...
=begin
Copyright 2010, Roger Pack 
This file is part of Sensible Cinema.

    Sensible Cinema is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Sensible Cinema is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Sensible Cinema.  If not, see <http://www.gnu.org/licenses/>.
=end


# load sane
print 'Starting Sensible Cinema...'

require File.expand_path(File.dirname(__FILE__) + "/../lib/add_any_bundled_gems_to_load_path.rb")
begin
  require 'sane'
rescue LoadError
  p 'please run $ rake rebundle_copy_in_dependencies first, as we dislike needing locally installed rubygems'
  raise
end

raise 'need jruby' unless OS.java?
raise 'need newer jruby!' unless RUBY_DESCRIPTION >= 'jruby 1.6.0' # may not need this since we still have to accomodate for so many...oddities in it :P

require_relative '../lib/gui/sensible-cinema-base'
require_relative '../lib/gui/sensible-cinema-normal'
require_relative '../lib/gui/sensible-cinema-create'
require_relative '../lib/gui/sensible-cinema-upconvert'

if $0 == __FILE__
  if ARGV.index('-h') || ARGV.index('--help')
    puts <<-EOL
     # jruby bin/sensible-cinema                    # DVD/file EDL player
     $ jruby bin/sensible-cinema --create-mode      # DVD output "parser/cutter" create mode [advanced]
     $ jruby bin/sensible-cinema --upconvert-mode   # DVD/file upconverting player
     $ jruby bin/sensible-cinema-cli                # the experimental OCR tracker for edited arbitrary online/local/internet players.
         See "Advanced" section in the developer_how_to.txt file, has its own set of options
        
         --exit-immediately [don't show the GUI, for benchmarking startup times]
    EOL
  else
    a = SensibleSwing::MainWindow.new
    a.setup_default_buttons
    puts 'Please use the Sensible Cinema GUI window popup...'
    if ARGV.index('--exit-immediately')
      a.dispose
    end
  end
end
